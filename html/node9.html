<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with jLaTeX2HTML 2002-2-1 (1.70) JA patch-2.0
patched version by:  Kenshi Muto, Debian Project.
* modified by:  Shige TAKENO
LaTeX2HTML 2002-2-1 (1.70),
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Problem definition</TITLE>
<META NAME="description" CONTENT="Problem definition">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="jLaTeX2HTML v2002-2-1 JA patch-2.0">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="main.css">

<LINK REL="next" HREF="node10.html">
<LINK REL="previous" HREF="node8.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node10.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html340"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html336"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html330"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html338"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html341"
  HREF="node10.html">Research goals</A>
<B> Up:</B> <A NAME="tex2html337"
  HREF="node4.html">Introduction</A>
<B> Previous:</B> <A NAME="tex2html331"
  HREF="node8.html">Constraint Satisfaction Techniques</A>
 &nbsp; <B>  <A NAME="tex2html339"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00045000000000000000">
Problem definition</A>
</H2>
Detailed specification of observing requirements and what trying to do and what sent to RCS and what comes back- - RCS does task decomposition, it is the executor. include linked groups, sequencing 

<P>
Specific nomenclature/terminology and symbols that will be used hereafter.

<P>
The Phase 2 Observing Database (ODB) (see Fig.&nbsp;<A HREF="#fig:phase2-architecture">2</A>) contains details of all the programs of observations. These details are supplied by astronomers using external tools [<A
 HREF="node99.html#clayandfraser06tbd">Clay and Fraser, 2006</A>] or are generated by external intelligent agents [<A
 HREF="node99.html#xxx">A.N.Other, 1999</A>] (TEA).

<P>

<DIV ALIGN="CENTER"><A NAME="fig:phase2-architecture"></A><A NAME="207"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2:</STRONG>
The Phase2 Observing Database (ODB) contains details of <TT>Proposals</TT>, <TT>Groups</TT> of <TT>Observations</TT>, <TT>Accounting</TT>, <TT>Linking</TT>, <TT>Targets</TT> and <TT>ExecutionHistory</TT>..blah..blah.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="448" HEIGHT="272" ALIGN="BOTTOM" BORDER="0"
 SRC="img62.png"
 ALT="\includegraphics[height=6cm]{figures/phase2_architecture.eps}">
   
</DIV>

<P></TD></TR>
</TABLE>
</DIV>

<P>
Proposals represent an astronomers observing program and correspond directly with the ?general definition? of a TAG allocated proposal. A proposal collects information required to perform the client's observations and time and resource accounting.  Programs collect together a number of different proposals for sharing of resource allocation. A proposal may participate in several programs. The unit of scheduling is termed a group and consists of the specifications of the observations, timing requirements, sequencing, observing condition constraints and quality of service metrics. Groups within a proposal may be linked in various ways (Fig.&nbsp;<A HREF="#fig:group-linking">3</A> contains details of some of these relationships.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:group-linking"></A><A NAME="208"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 3:</STRONG>
Groups within a proposal may be linked in various ways. The constraint between <B>Group#A</B> and <B>Group#B</B> states that a <B>Group#B</B> cannot be executed unless a <B>Group#A</B> was executed at least 30 units earlier. The constraint between Groups <B>#C</B> and <B>#D</B> states that C should only be executed if D is able to be executed between 20 and 40 units later and requires the ability of the scheduler to predict future group enablement.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="493" HEIGHT="272" ALIGN="BOTTOM" BORDER="0"
 SRC="img63.png"
 ALT="\includegraphics[height=6cm]{figures/group_linking.eps}">
   
</DIV>

<P></TD></TR>
</TABLE>
</DIV>

<P>
Each group has a set of enablement windows <IMG
 WIDTH="59" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img64.png"
 ALT="$ E={e_i}$"> which represent the intervals during which it should be observed if possible - these are obtained from the group's <TT>TimeConstraints</TT>, e.g. make this observation sometime between t1 and t2. As an added complication these may be cyclic - e.g. perform this observation once every 3 hours between t1 and t2. Some observations have fixed time constraints (do this at t3) or sliding fixed time constraints (do this at t1 or t2 or t3). 

<P>
The times when the group can actually be observed are further constrained by a number of factors:-

<UL>
<LI>Observations are only performed at night - in some cases we further restrict this to the period between evening and morning astronomical twilight.

<P>
</LI>
<LI>Environmental constraints, some are deterministic e.g. only observe this target if the moon is greater than distance <I>x</I> away from the target or only observe if the target is above elevation <I>y</I>. Others are less predictable, e.g. only observe this target if the atmospheric seeing is less than <I>z</I> arc seconds. 

<P>
</LI>
<LI>Observations cannot be made during bad weather (the dome is closed to protect the instruments) and there is no point observing in cloudy conditions

<P>
</LI>
<LI>There are unpredictable target-of-opportunity interrupts where external intelligent agents may take over the telescope for a period with no advance warning

<P>
</LI>
<LI>There are certain periods, usually known in advance when the telescope is unavailable due to engineering or local or remote manual observing.

<P>
</LI>
</UL>

<P>
Taken together these result in considerable uncertainty in the time spans available for observing (active windows). In such a dynamic environment any advanced planning can become rapidly out of date. 

<P>
The figures below illustrate 2 scenarios which might arise. 1- period monitor, 2- long flexible - one with real weather superimposed would be spiffing - this is tricky!

<P>
INSERT FIGURE showing enablement intervals and stuff..

<P>
A schedule can be any of the following in increasing degree of generalization:-

<UL>
<LI>A single group to execute.
</LI>
<LI>A series of groups with valid time windows.
</LI>
<LI>A tree of alternative groups with time windows and validity conditions.
</LI>
</UL>

<P>
Note: These paras need hacking about..

<P>
We choose to describe a schedule using a graph where each node <I>i</I> represents a tuple of the form <!-- MATH
 $<g_i,T_i,C_i,S>$
 -->
<IMG
 WIDTH="132" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img65.png"
 ALT="$ &lt;g_i,T_i,C_i,S&gt;$">, where <IMG
 WIDTH="19" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img66.png"
 ALT="$ g_i$"> is a group, <IMG
 WIDTH="21" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img67.png"
 ALT="$ T_i$"> is a time interval <!-- MATH
 $[est_i, lft_i]$
 -->
<IMG
 WIDTH="82" HEIGHT="37" ALIGN="MIDDLE" BORDER="0"
 SRC="img68.png"
 ALT="$ [est_i, lft_i]$"> spanning the earliest start time and latest finish time for <IMG
 WIDTH="19" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img66.png"
 ALT="$ g_i$">,  represents a set of boolean constraints <!-- MATH
 $\{c_{ij}\}$
 -->
<IMG
 WIDTH="43" HEIGHT="37" ALIGN="MIDDLE" BORDER="0"
 SRC="img70.png"
 ALT="$ \{c_{ij}\}$"> on the current (at the time of execution) environmental conditions under which which the group may execute and <IMG
 WIDTH="17" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img15.png"
 ALT="$ S$"> is a priority score which allows a decision to be made when several groups can be executed at a given decision point. An example of a set <IMG
 WIDTH="19" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img13.png"
 ALT="$ C$"> might be <!-- MATH
 $C_k = \{seeing < 0.8, skybright < 0.5\}$
 -->
<IMG
 WIDTH="310" HEIGHT="37" ALIGN="MIDDLE" BORDER="0"
 SRC="img71.png"
 ALT="$ C_k = \{seeing &lt; 0.8, skybright &lt; 0.5\}$"> indicating that group <IMG
 WIDTH="22" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img72.png"
 ALT="$ g_k$"> may be performed if the current atmospheric conditions satisfy the 2 constraints specified. The schedule must be executed in sequence by following a path through the graph from the start node. The duration of each group cannot be determined precisely in advance (though it can be estimated with reasonable accuracy) due to variable acquisition times, slewing and settling of directional and rotator axes and instrument internal configuration - we shall attempt to characterize this as part of the project.

<P>
The depth (path length) of the schedule we shall define as the <I>horizon length</I> and denote <IMG
 WIDTH="30" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img73.png"
 ALT="$ H_L$"> - this is the number of groups which can potentially be executed before the scheduler must be invoked again as part of the SEU cycle. In addition we define the <I>horizon time</I> <IMG
 WIDTH="31" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img74.png"
 ALT="$ H_T$"> as the difference between the largest <IMG
 WIDTH="37" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img75.png"
 ALT="$ lft_k$"> in any leaf node of the graph and  of the first node and is the longest span we expect the schedule to be valid for. 

<P>
As <IMG
 WIDTH="30" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img73.png"
 ALT="$ H_L$"> increases, the chances of a schedule breaking (next para) will increase - the characterisation of this parameter under various regimes will constitute part of this project

<P>
As a special case <I>dynamic despatch scheduling</I> has <IMG
 WIDTH="65" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img77.png"
 ALT="$ H_L=1$"> and <!-- MATH
 $C=\emptyset$
 -->
<IMG
 WIDTH="54" HEIGHT="37" ALIGN="MIDDLE" BORDER="0"
 SRC="img78.png"
 ALT="$ C=\emptyset$"> indicating that the schedule contains a single group which is by definition executable under the current conditions.

<P>
The overall architecture of the system is described in Fig.&nbsp;<A HREF="#fig:overview_architecture">4</A>. The OSS consists of the Scheduler, an UpdateEngine with associated QOS metric thingies and the ODB - the later consisting of Phase2, accounting and execution history databases. The RCS makes information about current conditions and time constraints available to the OSS continuously from which the OSS is able to make predictions about future conditions. When the RCS considers the telescope is available and the conditions suitable for observing it sends a <TT>request_schedule</TT> to the OSS. The scheduler interrogates the ODB and selects a schedule suitable for the current and predicted conditions and constraints. The RCS works its way through the schedule by selecting and executing groups. At each decision point a group is selected by comparing the validity time window, constraints and priority score then decomposing the group into a hierarchy of parallel tasks [<A
 HREF="node99.html#fraser02robotic">Fraser and Steele, 2002</A>] and sending commands to the TCS to control the telescope and to the ICS to configure and control the instrument(s). If a decision point is reached where no group in the schedule can be executed the schedule breaks and the scheduler must be invoked to generate a new schedule. As each group is completed (or fails) <TT>execution_results</TT> are sent to the OSS containing information about the execution of the group. The UpdateEngine uses this and the group-specific QOS metrics to update the Accounting and History databases. 

<P>

<DIV ALIGN="CENTER"><A NAME="fig:overview_architecture"></A><A NAME="198"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 4:</STRONG>
Scheduling Engine (SE) uses the Phase2, Accounting and History databases to decide on groups to schedule. On execution of a group the RCS sends results back which are processed by Updating Engine (UE) to update accounting information and QOS Thingy (QT) using group-specific QOS metrics to update history.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">

   
</DIV>

<P></TD></TR>
</TABLE>
</DIV>

<P>
In the current system the overheads associated with the schedule-execute-update cycle amount to the sum of the schedule generation and instrumentation setup times <IMG
 WIDTH="45" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img80.png"
 ALT="$ t_{sched}$"> and <IMG
 WIDTH="44" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img81.png"
 ALT="$ t_{setup}$">. This occurs for each cycle i.e. for each group executed. If the group execution time <!-- MATH
 $t_{group} \gg t_{sched}+t_{setup}$
 -->
 then this is not a great problem. However in the case of groups with short execution times considerable efficiency increases could be achieved by generating a longer schedule sequence with groups chosen so that the setup time between groups is minimized. Real world examples of this scenario have been observed where a pair of short period (in the order of 5 minute) monitoring groups with close targets and with durations of about 2 minutes incurred the full schedule and setup overheads when a pre-defined sequence could have selected the groups to execute in an interleaved fashion with minimal overheads. Another more extreme situation was observed where a single short period monitor was picked to run several times in succession but with the full slew and aquire setup overhead when a pre-defined sequence would have avoided the need to re-aquire the target thus reducing the overhead to almost zero.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html340"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html336"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html330"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html338"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html341"
  HREF="node10.html">Research goals</A>
<B> Up:</B> <A NAME="tex2html337"
  HREF="node4.html">Introduction</A>
<B> Previous:</B> <A NAME="tex2html331"
  HREF="node8.html">Constraint Satisfaction Techniques</A>
 &nbsp; <B>  <A NAME="tex2html339"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Steve Fraser
2008-01-31
</ADDRESS>
</BODY>
</HTML>
