#!/bin/csh

# Plot distribution of humidity

set in = $1 
set ot = $2
#set xx = `cat $in | grep "XL" | awk '{print $2}'`
#set otf = `echo $xx | awk '{printf "%4.2f",  ($1/1582518)}'`

#set xs = `cat $in | grep "XS" | awk '{print $2}'`
#set ots = `echo $xs | awk '{printf "%4.2f",  ($1/1582518)}'`

set av =  `cat $in | grep "AV" | awk '{printf "%4.2f", $2}'`

cat $in | awk '{sum+=$2;print $1,(sum/1582518)}' > $ot

#gnuplot -persist << EOF

set tit = "Humidity [%]"
set ltit = "humidity"

gnuplot << EOF
set output "hum.eps"
set terminal postscript enhanced color
set xlabel "${tit}"
set ylabel "Relative distribution"
set y2label"Cumulative distribution"
set title "Distribution of ${ltit} at site"
unset key
set xrange [0:100]
set yrange[0:0.11]
set y2range [0:1]

set label 1 "Avg  = $av " at graph 0.83,0.6
set arrow from 80,0.0 to 80,0.11 lt 3 nohead 
set label 3 "Clear" at 70,0.05
set arrow from 70,0.0 to 70,0.11 lt 3 nohead 
set label 4 "Alert" at 80,0.05

plot "${in}" using 1:(\$2/1582518) axis x1y1 with boxes fill solid 0.5,  "${ot}" using 1:2 axis x1y2 with line 
EOF



#gnuplot << EOF
#set output "${ot}.eps"
#set terminal postscript enhanced color
#set xlabel "${tit}"
#set ylabel "Cumulative distribution"
#set title "Distribution of ${ltit} at site"
#unset key
#set arrow from $3,0.05 to $3,0.95 lt 3 nohead 
#set label 3 "Clear" at $3,0.2
#set arrow from $4,0.05 to $4,0.95 lt 3 nohead 
#set label 4 "Alert" at $4,0.2
#plot "${ot}" using 1:2 with line  
#EOF


